<div class="visitor-container">
  <!-- Header -->
  <div class="page-header">
    <button class="back-btn" (click)="goBack()" *ngIf="!selectedCategory" aria-label="Go back to menu">
      ← {{ 'common.back' | translate }}
    </button>
    <button class="back-btn" (click)="backToCategories()" *ngIf="selectedCategory" aria-label="Back to categories">
      ← {{ 'visitor.categories.title' | translate }}
    </button>
    <h1>{{ selectedCategory ? selectedCategory.name : ('visitor.categories.title' | translate) }}</h1>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <p>{{ 'visitor.categories.loading' | translate }}</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button (click)="loadCocktails()" class="retry-btn">{{ 'common.retry' | translate }}</button>
  </div>

  <!-- Categories Grid -->
  <div *ngIf="!loading && !error && !selectedCategory" class="categories-grid">
    <div
      *ngFor="let category of categories"
      (click)="selectCategory(category)"
      (keydown.enter)="selectCategory(category)"
      class="category-card"
      tabindex="0"
      role="button"
      [attr.aria-label]="'Browse ' + category.name + ' cocktails'"
    >
      <div class="category-icon">{{ category.icon }}</div>
      <h2 class="category-name">{{ category.name }}</h2>
      <p class="category-description">{{ category.description }}</p>
      <div class="category-count">
        {{ getCategoryCount(category) }} {{ 'visitor.categories.cocktails' | translate }}
      </div>
    </div>
  </div>

  <!-- Category Results -->
  <div *ngIf="!loading && !error && selectedCategory" class="results-section">
    <div class="results-info">
      <p>
        {{ 'visitor.categories.found' | translate }} <strong>{{ filteredCocktails.length }}</strong> {{ selectedCategory.name.toLowerCase() }} {{ 'visitor.categories.cocktails' | translate }}
      </p>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredCocktails.length === 0" class="empty-state">
      <p>{{ 'visitor.categories.noCocktails' | translate }}</p>
    </div>

    <!-- Cocktails Grid -->
    <div *ngIf="filteredCocktails.length > 0" class="cocktails-grid">
      <div *ngFor="let cocktail of filteredCocktails" class="cocktail-card">
        <div class="cocktail-header">
          <h3 class="cocktail-name">{{ cocktail.name }}</h3>
          <span class="alcohol-badge" [ngClass]="getAlcoholClass(cocktail.abv)">
            {{ getAlcoholType(cocktail.abv) }}
          </span>
        </div>
        
        <div class="cocktail-info">
          <div class="info-row">
            <span class="label">{{ 'visitor.cocktailList.baseSpirit' | translate }}</span>
            <span class="value">{{ cocktail.baseSpirit }}</span>
          </div>
          <div class="info-row">
            <span class="label">{{ 'visitor.cocktailList.abv' | translate }}</span>
            <span class="value">{{ cocktail.abv }}%</span>
          </div>
          <div *ngIf="cocktail.tags && cocktail.tags.length > 0" class="tags-section">
            <span class="tag" *ngFor="let tag of cocktail.tags">{{ tag }}</span>
          </div>
        </div>

        <button
          (click)="viewRecipe(cocktail.id)"
          class="view-recipe-btn"
          aria-label="View recipe for {{ cocktail.name }}"
        >
          {{ 'visitor.cocktailList.viewRecipe' | translate }}
        </button>
      </div>
    </div>
  </div>

  <!-- Empty State for No Cocktails -->
  <div *ngIf="!loading && !error && !selectedCategory && allCocktails.length === 0" class="empty-state">
    <p>{{ 'visitor.categories.noCocktailsAvailable' | translate }}</p>
    <p class="hint">{{ 'visitor.categories.comeBackLater' | translate }}</p>
  </div>
</div>
