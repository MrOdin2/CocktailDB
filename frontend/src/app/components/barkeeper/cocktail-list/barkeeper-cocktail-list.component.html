<div class="barkeeper-container">
  <!-- Header -->
  <div class="view-header">
    <a [routerLink]="getBackRoute()" class="back-btn">â† {{ 'common.back' | translate }}</a>
    <h2>{{ getTitle() }}</h2>
    <!-- Filter toggle button for available mode -->
    <button 
      *ngIf="viewMode === 'available'" 
      class="filter-toggle-btn"
      [class.active]="showFilters || hasActiveFilters()"
      (click)="toggleFilters()"
      [attr.aria-label]="hasActiveFilters() ? 'Filter (active filters applied)' : 'Filter cocktails'"
      [attr.aria-expanded]="showFilters">
      <span aria-hidden="true">ğŸ”</span> {{ 'barkeeper.cocktailList.filter' | translate }}<span *ngIf="hasActiveFilters()" aria-hidden="true"> â—</span>
    </button>
  </div>

  <!-- Filters panel (only shown in available mode) -->
  <div *ngIf="viewMode === 'available' && showFilters" class="filters-panel">
    <div class="filter-row">
      <div class="filter-group">
        <label for="spiritFilter">{{ 'barkeeper.cocktailList.baseSpirit' | translate }}</label>
        <select 
          id="spiritFilter"
          [(ngModel)]="filterBaseSpirit" 
          (change)="onFilterChange()" 
          class="filter-select">
          <option value="all">{{ 'barkeeper.cocktailList.allSpirits' | translate }}</option>
          <option *ngFor="let spirit of availableBaseSpirits" [value]="spirit">
            {{ spirit | titlecase }}
          </option>
        </select>
      </div>

      <div class="filter-group">
        <label for="tagFilter">{{ 'barkeeper.cocktailList.tag' | translate }}</label>
        <select 
          id="tagFilter"
          [(ngModel)]="filterTag" 
          (change)="onFilterChange()" 
          class="filter-select">
          <option value="all">{{ 'barkeeper.cocktailList.allTags' | translate }}</option>
          <option *ngFor="let tag of availableTags" [value]="tag">
            {{ tag }}
          </option>
        </select>
      </div>

      <div class="filter-group">
        <label for="abvFilter">{{ 'barkeeper.cocktailList.abv' | translate }}</label>
        <select 
          id="abvFilter"
          [(ngModel)]="filterAbv" 
          (change)="onFilterChange()" 
          class="filter-select">
          <option value="all">{{ 'barkeeper.cocktailList.allAbv' | translate }}</option>
          <option value="non-alcoholic">{{ 'barkeeper.cocktailList.nonAlcoholic' | translate }}</option>
          <option value="low">{{ 'barkeeper.cocktailList.lowAbv' | translate }}</option>
          <option value="medium">{{ 'barkeeper.cocktailList.mediumAbv' | translate }}</option>
          <option value="high">{{ 'barkeeper.cocktailList.highAbv' | translate }}</option>
        </select>
      </div>
    </div>

    <button 
      *ngIf="hasActiveFilters()" 
      class="clear-filters-btn" 
      (click)="clearFilters()">
      {{ 'common.clearFilters' | translate }}
    </button>
  </div>

  <!-- Cocktails List -->
  <div class="cocktails-list">
    <div *ngIf="isLoading" class="loading">{{ 'barkeeper.cocktailList.loading' | translate }}</div>
    
    <div *ngIf="!isLoading && filteredCocktails.length === 0" class="empty">
      {{ 'barkeeper.cocktailList.noCocktails' | translate }}
    </div>
    
    <button 
      *ngFor="let cocktail of filteredCocktails"
      class="cocktail-btn"
      (click)="selectCocktail(cocktail)">
      <div class="cocktail-content">
        <span class="cocktail-name">{{ cocktail.name }}</span>
        <div class="cocktail-warnings" *ngIf="usesSubstitutes(cocktail) || usesAlternatives(cocktail)">
          <span class="warning-badge substitute" *ngIf="usesSubstitutes(cocktail)" [title]="'cocktails.usesSubstitutes' | translate">
            âš ï¸ {{ 'cocktails.substitute' | translate }}
          </span>
          <span class="warning-badge alternative" *ngIf="usesAlternatives(cocktail)" [title]="'cocktails.usesAlternatives' | translate">
            â„¹ï¸ {{ 'cocktails.alternative' | translate }}
          </span>
        </div>
      </div>
      <span class="cocktail-arrow">â†’</span>
    </button>
  </div>
</div>
