<div class="container">
  <div class="header-section">
    <h2>{{ 'settings.title' | translate }}</h2>
  </div>

  <div class="settings-section">
    <h3>Customer Authentication</h3>
    <p>Control whether customers need to scan a QR code to access visitor routes. When disabled, the cocktail menu is publicly accessible.</p>

    <div class="auth-toggle-container">
      <div class="auth-status" [class.enabled]="customerAuthEnabled" [class.disabled]="!customerAuthEnabled">
        <div class="status-indicator">
          <span class="status-icon">{{ customerAuthEnabled ? 'ðŸ”’' : 'ðŸ”“' }}</span>
          <div class="status-text">
            <h4>{{ customerAuthEnabled ? 'Enabled' : 'Disabled' }}</h4>
            <p>{{ customerAuthEnabled ? 'Visitors must scan QR code to access menu' : 'Menu is publicly accessible' }}</p>
          </div>
        </div>
        <button 
          class="btn-toggle" 
          [disabled]="isLoadingCustomerAuth"
          (click)="toggleCustomerAuth()"
          aria-label="Enable or disable customer authentication">
          {{ isLoadingCustomerAuth ? 'Updating...' : (customerAuthEnabled ? 'Disable' : 'Enable') }}
        </button>
      </div>
    </div>
    
    <p class="setting-note"><strong>{{ 'common.notes' | translate }}:</strong> When enabled, visitors need a valid QR code token to access cocktail listings and recipes. Staff can always log in directly. This is useful for bars that want to control menu access or when deploying on public networks.</p>
  </div>

  <div class="settings-section">
    <h3>{{ 'settings.language.title' | translate }}</h3>
    <p>{{ 'settings.language.description' | translate }}</p>

    <div class="language-grid">
      @for (lang of languages; track lang.code) {
        <div
          class="language-card"
          [class.active]="currentLanguage === lang.code"
          (click)="selectLanguage(lang.code)">
          <div class="language-header">
            <h4>{{ lang.nativeName }}</h4>
            @if (currentLanguage === lang.code) {
              <span class="active-badge">{{ 'common.active' | translate }}</span>
            }
          </div>
          <p class="language-description">{{ lang.name }}</p>
        </div>
      }
    </div>
    <p class="setting-note"><strong>{{ 'common.notes' | translate }}:</strong> {{ 'settings.language.note' | translate }}</p>
  </div>

  <div class="settings-section">
    <h3>{{ 'settings.measureUnit.title' | translate }}</h3>
    <p>{{ 'settings.measureUnit.description' | translate }}</p>

    <div class="unit-grid">
      @for (unit of measureUnits; track unit.id) {
        <div
          class="unit-card"
          [class.active]="currentUnit === unit.id"
          (click)="selectUnit(unit.id)">
          <div class="unit-header">
            <h4>{{ unit.name }}</h4>
            @if (currentUnit === unit.id) {
              <span class="active-badge">{{ 'common.active' | translate }}</span>
            }
          </div>
          <p class="unit-description">{{ unit.description }}</p>
          <p class="unit-example">Example: {{ unit.example }}</p>
        </div>
      }
    </div>
    <p class="setting-note"><strong>{{ 'common.notes' | translate }}:</strong> {{ 'settings.measureUnit.note' | translate }}</p>
  </div>

  <div class="settings-section">
    <h3>{{ 'settings.theme.title' | translate }}</h3>
    <p>{{ 'settings.theme.description' | translate }}</p>

    <div class="theme-grid">
      @for (theme of themes; track theme.id) {
        <div
          class="theme-card"
          [class.active]="currentTheme === theme.id"
          (click)="selectTheme(theme.id)">
          <div class="theme-header">
            <h4>{{ theme.name }}</h4>
            @if (currentTheme === theme.id) {
              <span class="active-badge">{{ 'common.active' | translate }}</span>
            }
          </div>
          <p class="theme-description">{{ theme.description }}</p>
          <p class="theme-preview">{{ theme.preview }}</p>
          <button class="btn-primary"
            [disabled]="currentTheme === theme.id"
            (click)="selectTheme(theme.id)">
            {{ currentTheme === theme.id ? ('settings.theme.currentTheme' | translate) : ('settings.theme.applyTheme' | translate) }}
          </button>
        </div>
      }
    </div>
  </div>

  <div class="info-section">
    <h3>{{ 'settings.about.title' | translate }}</h3>
    <p>{{ 'settings.about.basicDescription' | translate }}</p>
    <p>{{ 'settings.about.retroFeatures' | translate }}</p>
    <ul>
      <li>{{ 'settings.about.feature1' | translate }}</li>
      <li>{{ 'settings.about.feature2' | translate }}</li>
      <li>{{ 'settings.about.feature3' | translate }}</li>
      <li>{{ 'settings.about.feature4' | translate }}</li>
      <li>{{ 'settings.about.feature5' | translate }}</li>
      <li>{{ 'settings.about.feature6' | translate }}</li>
    </ul>
    <p><strong>{{ 'common.notes' | translate }}:</strong> {{ 'settings.theme.note' | translate }}</p>
  </div>
</div>
